<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chess Coach</title>

    <!-- Board CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chessground@8.3.3/assets/chessground.base.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chessground@8.3.3/assets/chessground.brown.css">

    <!-- Piece CSS -->
    <link id="piece-set-css" rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/lichess-org/lila@master/public/piece-css/cburnett.css">

    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="container">
        <div id="board" class="board is2d"></div>

        <div class="sidebar">
            <!-- Fixed Top Section (Clocks & Essential Info) -->
            <div class="sidebar-top">
                <div class="chess-clock-panel" id="chessClockPanel">
                    <div class="clock-display">
                        <div class="clock-player" id="whiteClockPlayer">
                            <div class="clock-player-label">White</div>
                            <div class="clock-time" id="whiteClock">10:00</div>
                        </div>
                        <div class="clock-player" id="blackClockPlayer">
                            <div class="clock-player-label">Black</div>
                            <div class="clock-time" id="blackClock">10:00</div>
                        </div>
                    </div>
                </div>

                <div class="essential-info">
                    <div id="status">White to move</div>
                    <div id="ratingBadge" class="rating-badge" style="display: none;">
                        <span class="rating-icon">üìä</span>
                        <span id="ratingValue">~800</span>
                    </div>
                </div>

                <div id="evaluation-bar">
                    <div id="eval-fill"></div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="sidebar-tabs">
                <button class="sidebar-tab active" data-tab="play">üéÆ Play</button>
                <button class="sidebar-tab" data-tab="analysis">üß† Analysis</button>
                <button class="sidebar-tab" data-tab="settings">‚öôÔ∏è Settings</button>
            </div>

            <!-- Tab Content Area -->
            <div class="tab-content">
                <!-- PLAY TAB -->
                <div class="tab-panel active" id="tab-play">
                    <!-- Action Buttons - Moved up for accessibility -->
                    <div class="button-group compact">
                        <button id="resetBtn" class="primary-btn" title="Start a fresh new game">New Game</button>
                        <button id="undoBtn" title="Undo the last move">Undo</button>
                        <button id="flipBtn" title="Flip the board to play from the other side">Flip</button>
                    </div>

                    <div id="feedback" class="feedback-box">
                        Make a move to get coaching...
                    </div>

                    <button id="continueBtn" class="continue-btn" style="display: none;">
                        Ignore & Continue Game
                    </button>

                    <div class="move-history-panel">
                        <div class="move-history-header">
                            <h3>Move History</h3>
                            <div class="game-controls">
                                <button id="saveGameBtn" class="icon-btn"
                                    title="Save current game to browser storage">üíæ</button>
                                <button id="loadGameBtn" class="icon-btn"
                                    title="Load a previously saved game">üìÇ</button>
                                <button id="exportPgnBtn" class="icon-btn" title="Save game as a PGN file">üì§</button>
                                <button id="importPgnBtn" class="icon-btn"
                                    title="Import game from a PGN file">üì•</button>
                            </div>
                        </div>
                        <div id="move-list" class="move-list">
                            <div class="move-list-empty">No moves yet</div>
                        </div>
                    </div>

                    <button id="learningDashboardBtn" class="learning-btn">
                        üìä Learning Dashboard
                    </button>
                </div>

                <!-- ANALYSIS TAB -->
                <div class="tab-panel" id="tab-analysis">
                    <!-- Opening Information -->
                    <div class="opening-panel">
                        <div class="opening-header">
                            <div id="opening-name" class="opening-name">Starting Position</div>
                            <div class="opening-meta">
                                <span id="opening-eco" class="opening-eco"></span>
                                <span id="opening-category" class="opening-category"></span>
                            </div>
                        </div>
                        <div id="opening-variations" class="opening-variations"></div>
                    </div>

                    <!-- Analysis Tools -->
                    <div class="analysis-panel">
                        <h3>Analysis Tools</h3>
                        <div class="analysis-controls">
                            <button id="hintBtn" class="analysis-btn">üí° Get Hint</button>
                            <button id="analyzeBtn" class="analysis-btn">üîç Analyze</button>
                        </div>

                        <div id="bestMovesPanel" class="best-moves-panel" style="display: none;">
                            <div class="best-moves-header">Top Moves:</div>
                            <div id="bestMovesList" class="best-moves-list"></div>
                        </div>
                    </div>

                    <!-- Critical Moments & Puzzles -->
                    <div id="criticalMomentsPanel" class="critical-moments-panel" style="display: none;">
                        <h3>Critical Moments</h3>
                        <div id="criticalMomentsList" class="critical-moments-list"></div>
                    </div>

                    <div id="puzzlesPanel" class="puzzles-panel" style="display: none;">
                        <h3>Generated Puzzles</h3>
                        <div id="puzzlesList" class="puzzles-list"></div>
                    </div>
                </div>

                <!-- SETTINGS TAB -->
                <div class="tab-panel" id="tab-settings">
                    <div class="settings-section">
                        <h4>Game Settings</h4>
                        <div class="control-group">
                            <label class="toggle-switch-label">
                                <span>‚è±Ô∏è Enable Clock</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="clockEnabled">
                                    <span class="toggle-slider"></span>
                                </label>
                            </label>
                            <select id="clockPreset" class="clock-preset-select">
                                <option value="bullet_1">1+0 Bullet</option>
                                <option value="blitz_3">3+0 Blitz</option>
                                <option value="blitz_5">5+0 Blitz</option>
                                <option value="rapid_10" selected>10+0 Rapid</option>
                                <option value="classical_30">30+0 Classical</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="showHints" checked>
                                Pause & Explain Mistakes
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="analysisMode">
                                Analysis Mode (No AI)
                            </label>
                        </div>

                        <div class="control-group">
                            <label for="difficulty">Opponent Level:</label>
                            <select id="difficulty">
                                <option value="2">Easy</option>
                                <option value="6">Medium</option>
                                <option value="12">Hard</option>
                                <option value="18" selected>Master</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label for="analysisDepth">Analysis Depth:</label>
                            <select id="analysisDepth">
                                <option value="10">Fast</option>
                                <option value="15" selected>Balanced</option>
                                <option value="20">Deep</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h4>Appearance</h4>
                        <div class="control-group">
                            <label class="toggle-switch-label">
                                <span>üåô Dark Mode</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="darkModeToggle" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </label>
                        </div>

                        <div class="control-group">
                            <label for="boardTheme">Board:</label>
                            <select id="boardTheme">
                                <option value="brown">Brown</option>
                                <option value="blue">Blue</option>
                                <option value="green">Green</option>
                                <option value="marble">Marble</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label for="pieceSet">Pieces:</label>
                            <select id="pieceSet">
                                <option value="cburnett">Classic</option>
                                <option value="merida">Merida</option>
                                <option value="chess7">Chess7</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label for="boardSize">Board Size: <span id="boardSizeValue">600px</span></label>
                            <input type="range" id="boardSize" min="300" max="800" value="600" step="50">
                        </div>

                        <div class="control-group">
                            <label for="animationSpeed">Animation:</label>
                            <select id="animationSpeed">
                                <option value="instant">Instant</option>
                                <option value="fast">Fast</option>
                                <option value="normal" selected>Normal</option>
                                <option value="slow">Slow</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="soundToggle" checked>
                                Sound Effects
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- Hidden file input for PGN import -->
    <input type="file" id="pgnFileInput" accept=".pgn" style="display: none;">

    <!-- Load Game Modal -->
    <div id="loadGameModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Load Saved Game</h3>
                <button id="closeModalBtn" class="close-btn">&times;</button>
            </div>
            <div id="savedGamesList" class="saved-games-list">
                <div class="no-games">No saved games found</div>
            </div>
        </div>
    </div>

    <script type="module" src="script.js"></script>

</body>

</html>