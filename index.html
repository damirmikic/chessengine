<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chess Coach</title>
    
    <!-- Board CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chessground@8.3.3/assets/chessground.base.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chessground@8.3.3/assets/chessground.brown.css">
    
    <!-- Piece CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lichess-org/lila@master/public/piece-css/cburnett.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <div id="board" class="board is2d"></div>
    
    <div class="sidebar">
        <!-- Opening Information Panel -->
        <div class="opening-panel">
            <div class="opening-header">
                <div id="opening-name" class="opening-name">Starting Position</div>
                <div class="opening-meta">
                    <span id="opening-eco" class="opening-eco"></span>
                    <span id="opening-category" class="opening-category"></span>
                </div>
            </div>
            <div id="opening-variations" class="opening-variations"></div>
            <div id="opening-stats" class="opening-stats"></div>
            <div id="opening-plans" class="opening-plans"></div>
        </div>

        <!-- Move History Panel -->
        <div class="move-history-panel">
            <div class="move-history-header">
                <h3>Move History</h3>
                <div class="game-controls">
                    <button id="saveGameBtn" class="icon-btn" title="Save Game">üíæ</button>
                    <button id="loadGameBtn" class="icon-btn" title="Load Game">üìÇ</button>
                    <button id="exportPgnBtn" class="icon-btn" title="Export PGN">üì§</button>
                    <button id="importPgnBtn" class="icon-btn" title="Import PGN">üì•</button>
                </div>
            </div>
            <div id="move-list" class="move-list">
                <div class="move-list-empty">No moves yet</div>
            </div>
        </div>

        <h2>Coach Feedback</h2>
        <div id="status">White to move</div>
        
        <!-- Evaluation Bar -->
        <div id="evaluation-bar">
            <div id="eval-fill"></div>
        </div>
        
        <div id="feedback" class="feedback-box">
            Make a move to get coaching...
        </div>
        
        <!-- Continue Button -->
        <button id="continueBtn" class="continue-btn" style="display: none;">
            Ignore & Continue Game
        </button>

        <!-- Analysis Panel -->
        <div class="analysis-panel">
            <h3>Analysis Tools</h3>

            <!-- Multiple Best Moves Display -->
            <div id="bestMovesPanel" class="best-moves-panel" style="display: none;">
                <div class="best-moves-header">Top Moves:</div>
                <div id="bestMovesList" class="best-moves-list"></div>
            </div>

            <!-- Analysis Controls -->
            <div class="analysis-controls">
                <button id="hintBtn" class="analysis-btn" title="Get a hint for the current position">
                    üí° Get Hint
                </button>
                <button id="analyzeBtn" class="analysis-btn" title="Analyze current position">
                    üîç Analyze
                </button>
            </div>
        </div>

        <!-- Critical Moments Panel -->
        <div id="criticalMomentsPanel" class="critical-moments-panel" style="display: none;">
            <h3>Critical Moments</h3>
            <div id="criticalMomentsList" class="critical-moments-list"></div>
        </div>

        <!-- Puzzles Panel -->
        <div id="puzzlesPanel" class="puzzles-panel" style="display: none;">
            <h3>Generated Puzzles</h3>
            <div id="puzzlesList" class="puzzles-list"></div>
            <button id="showPuzzlesBtn" class="show-puzzles-btn" style="display: none;">
                View Puzzles (0)
            </button>
        </div>

        <!-- Settings Group -->
        <div class="control-group">
            <label class="checkbox-label">
                <input type="checkbox" id="showHints" checked>
                Pause & Explain Mistakes
            </label>
            <label class="checkbox-label">
                <input type="checkbox" id="analysisMode">
                Analysis Mode (No Engine Moves)
            </label>
        </div>

        <!-- Difficulty Control -->
        <div class="control-group">
            <label for="difficulty">Opponent Level:</label>
            <select id="difficulty">
                <option value="2">Easy (Beginner)</option>
                <option value="6">Medium (Casual)</option>
                <option value="12">Hard (Club)</option>
                <option value="18" selected>Master (Pro)</option>
            </select>
        </div>

        <!-- Analysis Depth Control -->
        <div class="control-group">
            <label for="analysisDepth">Analysis Depth:</label>
            <select id="analysisDepth">
                <option value="10">Depth 10 (Fast)</option>
                <option value="15" selected>Depth 15 (Balanced)</option>
                <option value="20">Depth 20 (Deep)</option>
                <option value="25">Depth 25 (Very Deep)</option>
            </select>
        </div>
        
        <!-- Action Buttons -->
        <div class="button-group">
            <button id="undoBtn">Undo Move</button>
            <button id="flipBtn">Play as Black</button>
            <button id="resetBtn" class="primary-btn">New Game</button>
        </div>
    </div>
</div>

<!-- Hidden file input for PGN import -->
<input type="file" id="pgnFileInput" accept=".pgn" style="display: none;">

<!-- Load Game Modal -->
<div id="loadGameModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Load Saved Game</h3>
            <button id="closeModalBtn" class="close-btn">&times;</button>
        </div>
        <div id="savedGamesList" class="saved-games-list">
            <div class="no-games">No saved games found</div>
        </div>
    </div>
</div>

<script type="module" src="script.js"></script>

</body>
</html>